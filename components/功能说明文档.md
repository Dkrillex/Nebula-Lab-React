# Components 组件文档

本目录包含项目中使用的所有可复用 React 组件。

## 组件列表

### 1. **AuthModal.tsx** - 认证模态框
- **功能**: 提供用户登录、注册和手机号验证码登录功能
- **特性**:
  - 支持三种登录方式：账号密码登录、手机号验证码登录、注册
  - 支持多国家代码选择
  - 验证码发送倒计时
  - 表单验证和错误提示
  - 隐私政策和服务条款确认

### 2. **BaseModal.tsx** - 基础模态框
- **功能**: 提供通用的模态框基础组件
- **特性**:
  - 可自定义标题和内容
  - 支持自定义宽度
  - 自动处理 body 滚动锁定
  - 响应式设计，支持暗色模式

### 3. **ConfirmDialog.tsx** - 确认对话框
- **功能**: 用于需要用户确认的操作
- **特性**:
  - 支持三种类型：danger（危险）、warning（警告）、info（信息）
  - 可自定义确认和取消按钮文本
  - 动画效果

### 4. **Toast.tsx** - 消息提示组件
- **功能**: 全局消息提示系统
- **特性**:
  - 支持四种类型：success、error、warning、info
  - 自动消失（可配置时长）
  - 支持手动关闭
  - 提供全局 toast 方法供调用

### 5. **UploadComponent.tsx** - 文件上传组件
- **功能**: 通用的文件上传组件
- **特性**:
  - 支持图片、视频、音频等多种文件类型
  - 支持 OSS 和 TV OSS 两种上传方式
  - 文件预览功能
  - 文件大小验证
  - 上传进度显示
  - 支持立即上传或手动触发上传

### 6. **AddMaterialModal.tsx** - 添加素材模态框
- **功能**: 用于添加和管理素材（文件或文件夹）
- **特性**:
  - 支持创建文件和文件夹两种模式
  - 支持多种素材类型：图片、视频、音频、数字人等
  - 支持个人文件和共享文件存储
  - 支持团队选择
  - 素材标签和描述
  - 私有模型选项

### 7. **Header.tsx** - 页面头部组件
- **功能**: 应用的主导航栏
- **特性**:
  - Logo 和品牌展示
  - 标签页导航（支持多标签页管理）
  - 用户菜单（头像、个人中心、退出登录等）
  - 主题切换（明暗模式）
  - 语言切换
  - 通知按钮
  - 移动端菜单按钮
  - 响应式设计

### 8. **Sidebar.tsx** - 侧边栏组件
- **功能**: 桌面端侧边导航栏
- **特性**:
  - 可折叠/展开
  - 多级菜单支持
  - 菜单项高亮（基于当前路由）
  - 支持外链
  - 根据系统类型（模型中心/创作中心）过滤菜单
  - 品牌信息展示

### 9. **MobileSidebar.tsx** - 移动端侧边栏
- **功能**: 移动端侧边导航栏
- **特性**:
  - 全屏覆盖式菜单
  - 可折叠的菜单组
  - 用户登录状态显示
  - 登录/退出按钮
  - 响应式菜单结构

### 10. **Layout.tsx** - 主布局组件
- **功能**: 应用的根布局组件
- **特性**:
  - 整合 Header、Footer、AuthModal、NotificationModal
  - 管理主题状态
  - 管理语言状态
  - 管理标签页历史记录
  - 路由导航处理
  - 用户认证状态管理

### 11. **DashboardLayout.tsx** - 仪表板布局
- **功能**: 带侧边栏的仪表板布局
- **特性**:
  - 集成 Sidebar 组件
  - 主内容区域
  - 支持 Outlet 上下文传递

### 12. **NotificationModal.tsx** - 通知模态框
- **功能**: 显示和管理系统通知
- **特性**:
  - 通知列表展示
  - 全部/未读筛选
  - 标记已读/全部已读
  - 删除通知
  - 通知详情查看
  - 响应式设计（移动端和桌面端）

### 13. **Footer.tsx** - 页脚组件
- **功能**: 页面底部信息展示
- **特性**:
  - 版权信息
  - 隐私协议链接
  - 服务条款链接
  - 社交媒体链接

### 14. **CachedOutlet.tsx** - 缓存路由出口组件
- **功能**: 提供路由出口功能，支持上下文传递
- **特性**:
  - 作为普通 Outlet 使用
  - 支持上下文传递（context）
  - 缓存功能暂时禁用（待找到合适的实现方式）
- **使用场景**: 在路由配置中使用，替代标准的 Outlet 组件

### 15. **KeepAlive.tsx** - KeepAlive 组件
- **功能**: 组件缓存包装器（基于 react-activation）
- **特性**:
  - 缓存组件状态，类似 Vue 的 keep-alive
  - 支持保存滚动位置
  - 使用 cacheKey 标识缓存的组件
- **使用场景**: 需要保持组件状态的页面（如表单页面、列表页面）

### 16. **KeepAliveWrapper.tsx** - KeepAlive 包装器
- **功能**: KeepAlive 功能的包装组件，提供更便捷的使用方式
- **特性**:
  - 自动从 cacheStore 读取缓存配置
  - 支持排除列表（excludeCachedComponents）
  - 支持动态启用/禁用缓存
  - 提供 KeepAliveProvider 组件
- **使用场景**: 在路由配置中包裹需要缓存的页面组件

### 17. **FolderSelectModal.tsx** - 文件夹选择模态框
- **功能**: 用于选择文件夹的模态框组件
- **特性**:
  - 支持个人文件夹和共享文件夹选择
  - 分层加载文件夹结构
  - 面包屑导航
  - 支持创建新文件夹
  - 支持团队文件夹选择
- **使用场景**: 素材管理、文件移动等需要选择目标文件夹的场景

### 18. **ImageRemoveBackgroundComponent.tsx** - 图片去背景组件
- **功能**: 图片上传和自动去背景处理
- **特性**:
  - 图片上传到 OSS
  - 自动调用去背景 API
  - 轮询任务状态
  - 预览原始图片和处理结果
  - 支持文件大小限制
  - 支持立即上传或手动触发
  - 提供 ref 接口供外部调用
- **使用场景**: 数字人视频、产品图片处理等需要去背景的场景

### 19. **InvoiceForm.tsx** - 发票表单组件
- **功能**: 用户发票信息表单
- **特性**:
  - 发票抬头名称
  - 纳税人识别号
  - 邮箱地址
  - 公司地址
  - 公司电话
  - 开户银行
  - 银行账号
  - 表单验证
  - 提供 ref 接口（validate、resetForm）
- **使用场景**: 用户中心、订单管理等需要填写发票信息的场景

### 20. **MoveShareModal.tsx** - 移动/分享模态框
- **功能**: 用于移动或分享素材到其他文件夹
- **特性**:
  - 支持个人文件和共享文件之间的移动
  - 文件夹树形结构选择
  - 面包屑导航
  - 支持创建新文件夹
  - 支持团队文件夹
  - 防止循环引用（excludeIds）
- **使用场景**: 素材管理中的移动、分享功能

### 21. **TeamLogsImportModal.tsx** - 团队日志导入模态框
- **功能**: 导入团队消费日志 Excel 文件
- **特性**:
  - 支持 .xlsx 和 .xls 格式
  - 文件上传验证
  - 支持更新模式（覆盖已有数据）
  - 上传进度显示
  - 错误处理和提示
- **使用场景**: 团队管理、消费记录导入功能

## 使用说明

所有组件都使用 TypeScript 编写，并遵循 React Hooks 最佳实践。组件支持暗色模式，使用 Tailwind CSS 进行样式设计。

大多数组件都通过 props 接收配置，并提供了良好的类型定义，便于在 IDE 中获得类型提示。

### KeepAlive 使用说明

如需使用组件缓存功能，需要：

1. 在应用根组件中使用 `KeepAliveProvider`：
```tsx
import { KeepAliveProvider } from '@/components/KeepAliveWrapper';

function App() {
  return (
    <KeepAliveProvider>
      {/* 应用内容 */}
    </KeepAliveProvider>
  );
}
```

2. 在路由配置中使用 `KeepAliveWrapper` 包裹需要缓存的组件：
```tsx
import { KeepAliveWrapper } from '@/components/KeepAliveWrapper';

<Route path="/page" element={
  <KeepAliveWrapper cacheKey="/page">
    <PageComponent />
  </KeepAliveWrapper>
} />
```

3. 使用 `cacheStore` 管理缓存列表：
```tsx
import { useCacheStore } from '@/stores/cacheStore';

const { addCachedComponent, removeCachedComponent } = useCacheStore();
```

## 更新日期

最后更新：2025-01-XX

