# 菜单栏结构说明

本文档整理了项目侧边栏（Sidebar）的菜单结构、对应路由路径以及组件信息。

## 侧边栏交互说明

侧边栏采用**动态展示**模式，根据当前访问的页面类别自动显示对应的子菜单项：
- 访问模型中心相关页面时，侧边栏显示模型中心的子菜单
- 访问创作中心相关页面时，侧边栏显示创作中心的子菜单
- 访问个人中心相关页面时，侧边栏显示个人中心的子菜单

## 主菜单结构

### 1. 首页 (Home)

| 菜单名称 | 菜单ID | 路由路径 | 对应组件 | 说明 |
| :--- | :--- | :--- | :--- | :--- |
| **首页** | `home` | `/create` | `pages/Create/index.tsx` | 创作首页，展示快捷入口和创作选项 |

> 注意：侧边栏中的"首页"实际指向创作页面，而非根路径 `/`

### 2. 模型中心 (Model Center)

当访问以下任意页面时，侧边栏会展开显示模型中心的子菜单：

| 菜单名称 | 菜单ID | 路由路径 | 对应组件 | 说明 |
| :--- | :--- | :--- | :--- | :--- |
| **AI体验** | `aiExperience` | `/chat` | `pages/Chat/index.tsx` | AI 对话/聊天界面 |
| **模型广场** | `modelSquare` | `/models` | `pages/Models/index.tsx` | 展示可用 AI 模型列表 |
| **API密钥** | `apiKeys` | `/keys` | `pages/Keys/index.tsx` | API Key 的管理与配置（需要登录） |
| **API操作文档** | `apiDocs` | 外链 | - | 跳转至 Apifox API 文档（新标签页打开） |

### 3. 创作中心 (Creation Center)

当访问 `/create` 路径时，侧边栏会展开显示创作中心的子菜单。所有创作工具都通过 `?tool=xxx` 参数来区分：

| 菜单名称 | 菜单ID | 路由参数 | 对应组件 | 说明 |
| :--- | :--- | :--- | :--- | :--- |
| **AI混剪视频** | `viralVideo` | `?tool=viralVideo` | `pages/Create/components/ViralVideoPage.tsx` | AI 视频混剪/营销视频生成 |
| **数字人视频** | `digitalHuman` | `?tool=digitalHuman` | `pages/Create/components/DigitalHumanPage.tsx` | 数字人视频、照片说话 |
| **图生视频** | `imgToVideo` | `?tool=imgToVideo` | `pages/Create/components/ImageToVideoPage.tsx` | 图片转视频功能 |
| **AI生图** | `textToImage` | `?tool=textToImage` | `pages/Create/components/TextToImagePage.tsx` | 文生图、图生图功能 |
| **万物迁移** | `styleTransfer` | `?tool=styleTransfer` | `pages/Create/components/StyleTransferPage.tsx` | 图片/视频风格迁移、服装换装 |
| **声音克隆** | `voiceClone` | `?tool=voiceClone` | `pages/Create/components/VoiceClonePage.tsx` | 声音克隆功能 |
| **创作工坊** | `workshop` | `?tool=workshop` | `pages/Create/components/WorkshopPage.tsx` | 更多创意 AI 工具集合 |

#### 创作工坊子工具

创作工坊包含以下子工具（通过不同的 `tool` 参数访问）：
- `faceSwap` / `aiFaceSwap` - AI换脸
- `tts` / `ttsTool` - 文本转语音
- `glbViewer` / `3dModel` - 3D模型查看器
- `imageTranslation` - 图像翻译
- `videoTranslation` - 视频翻译
- `useTool` - 自定义工具
- `templateUi` - AI模板

### 4. 个人中心 (Personal Center)

当访问以下任意页面时，侧边栏会展开显示个人中心的子菜单：

| 菜单名称 | 菜单ID | 路由路径 | 对应组件 | 说明 |
| :--- | :--- | :--- | :--- | :--- |
| **素材管理** | `assets` | `/assets` | `pages/Assets/index.tsx` | 查看和管理用户生成的资产 |
| **定价列表** | `pricing` | `/pricing` | `pages/Pricing/index.tsx` | 订阅计划与价格展示 |
| **价格列表** | `priceList` | `/price-list` | `pages/PriceList/index.tsx` | 价格列表管理（需要登录） |
| **我的费用** | `expenses` | `/expenses` | `pages/Expenses/index.tsx` | 查看账户消费历史和余额（需要登录） |
| **个人中心** | `profile` | `/profile` | `pages/Profile/index.tsx` | 用户个人信息设置、密码修改等 |

#### 个人中心详细功能

个人中心 (`/profile`) 包含三个主要标签页：

##### 1. 基本资料 (`?tab=basic` 或默认)

**功能模块：**
- 头像上传与更新
- 基本信息编辑：
  - 昵称（nickName）
  - 手机号（phonenumber）
  - 邮箱（email）
  - 性别（sex）
- 用户角色和部门信息展示
- 账户创建时间显示

**API 接口：**
- `GET /system/user/profile` - 获取用户资料
- `PUT /system/user/profile` - 更新用户资料
- `POST /system/user/profile/avatar` - 上传头像

##### 2. 账号安全 (`?tab=security`)

**功能模块：**
- 密码修改功能
- 账户安全设置
- 定期修改密码提醒

**说明：** 
当前版本主要展示密码安全相关信息和操作入口，帮助用户维护账户安全。

##### 3. 企业管理 (`?tab=enterprise`)

企业管理标签页包含两个子标签页：

###### 3.1 企业管理 (`?tab=enterprise&subTab=channel` 或默认)

**功能模块：**
- **渠道管理**（需要 channelId 权限）：
  - 查看渠道信息（渠道名称、是否共享素材等）
  - 编辑渠道配置
  - 创建新渠道
  - 无权限时显示提示信息

**API 接口：**
- `GET /ads/labChannel/list` - 获取渠道列表
- `POST /ads/labChannel` - 创建渠道
- `PUT /ads/labChannel` - 更新渠道

**权限说明：**
- 需要用户具有 `channelId`（非空/非0）
- 无权限时显示"暂不支持该功能，请联系管理员开通渠道权限"

###### 3.2 团队管理 (`?tab=enterprise&subTab=team`)

**功能模块：**
- 查看团队列表（支持搜索和分页）
- 创建新团队（仅渠道拥有者）
- 编辑团队信息（团队名称、备注、状态、团队角色等）
- 删除团队（仅渠道拥有者）
- 管理团队成员：
  - 查看成员列表
  - 添加成员
  - 邀请成员（生成邀请链接）
  - 编辑成员角色
  - 修改成员权限
  - 配额分配
  - 移除成员

**API 接口：**
- 团队相关：
  - `GET /ads/labTeam/list` - 获取团队列表
  - `GET /ads/labTeam/{id}` - 获取团队详情
  - `POST /ads/labTeam` - 创建团队
  - `PUT /ads/labTeam` - 更新团队
  - `DELETE /ads/labTeam/{id}` - 删除团队
  - `GET /ads/teamUser/detailListByTeam` - 获取团队成员详情列表
  - `POST /ads/teamUser` - 添加团队成员
  - `DELETE /ads/teamUser/removeMember` - 移除团队成员
  - `PUT /ads/teamUser/updateMemberAuth` - 更新成员权限
  - `GET /ads/teamRole/listByTeam` - 获取团队角色列表
  - `PUT /ads/teamRole/updateMemberRole` - 更新成员角色
  - `PUT /ads/teamRole/updateTeamRoles` - 更新团队角色

**权限说明：**
- 企业管理（渠道管理）：需要用户具有 `channelId`（非空/非0）
- 团队管理：
  - 需要用户登录
  - 创建团队：仅渠道拥有者
  - 删除团队：仅渠道拥有者
  - 管理团队：渠道拥有者或团队 leader（userAuthType = 2）
  - 管理成员：渠道拥有者或团队 leader

---

## 其他页面

以下页面未直接在侧边栏菜单中列出，但存在于项目中：

| 页面名称 | 路由路径 | 对应组件 | 说明 |
| :--- | :--- | :--- | :--- |
| **欢迎页** | `/` | `pages/Home/index.tsx` | 项目根路径的欢迎页面，展示 Hero 区域和模型列表 |
| **隐私政策** | `/privacy` | `pages/Privacy/index.tsx` | 隐私协议页面（在侧边栏底部有链接） |
| **企业版** | - | `pages/Enterprise/index.tsx` | 企业版页面（可能为预留页面） |

---

## 路由配置文件

- **核心路由**: `router/routes/core.tsx` - 包含欢迎页和隐私政策页面
- **业务路由**: `router/routes/local.tsx` - 包含所有需要 DashboardLayout 的页面
- **路由主文件**: `router/index.tsx` - 合并路由并处理认证守卫

---

## 权限控制

以下页面需要用户登录才能访问：
- **API密钥** (`/keys`) - 需要登录，未登录会弹出登录窗口
- **我的费用** (`/expenses`) - 需要登录，未登录会弹出登录窗口
- 所有 `/create` 路由 - 设置了 `requiresAuth: true`
- 其他个人中心页面 - 建议登录后使用

---

## 侧边栏组件特性

### 折叠功能
- 侧边栏支持折叠/展开（通过左下角按钮切换）
- 折叠状态下仅显示图标
- 展开状态下显示完整菜单项和文字

### 外链处理
- 标有 `externalLink` 的菜单项会在新标签页打开
- 示例：API操作文档

### 活动状态指示
- 当前激活的菜单项会高亮显示
- 使用渐变背景和左侧指示条来标识激活状态

### 多语言支持
- 菜单文字从 `translations.ts` 中的 `createPage.sideMenu` 获取
- 支持中文（zh）和英文（en）

---

## 页面组件说明

### Pages 目录结构

```
pages/
├── Assets/              # 素材管理页面
│   └── index.tsx
├── Chat/                # AI 对话页面
│   ├── index.tsx
│   ├── components/
│   │   └── CodeBlock.tsx
│   └── modelConstants.ts
├── Create/              # 创作中心页面
│   ├── index.tsx
│   ├── components/      # 各种创作工具页面组件
│   │   ├── ViralVideoPage.tsx
│   │   ├── DigitalHumanPage.tsx
│   │   ├── ImageToVideoPage.tsx
│   │   ├── TextToImagePage.tsx
│   │   ├── StyleTransferPage.tsx
│   │   ├── VoiceClone.tsx
│   │   ├── WorkshopPage.tsx
│   │   └── ... (其他工具组件)
│   └── data.ts
├── Enterprise/          # 企业版页面
│   └── index.tsx
├── Expenses/            # 消费记录页面
│   └── index.tsx
├── Home/                # 首页
│   ├── index.tsx
│   ├── components/      # 首页组件
│   │   ├── Hero.tsx
│   │   ├── ModelList.tsx
│   │   ├── ModelCard.tsx
│   │   └── ...
│   └── service/
│       └── geminiService.ts
├── Keys/                # API 密钥页面
│   ├── index.tsx
│   └── components/
│       └── TokenForm.tsx
├── Models/              # 模型广场页面
│   └── index.tsx
├── PriceList/           # 价格列表页面
│   ├── index.tsx
│   └── components/
│       └── PriceListForm.tsx
├── Pricing/             # 定价页面
│   └── index.tsx
├── Privacy/             # 隐私政策页面
│   └── index.tsx
└── Profile/             # 个人中心页面
    ├── index.tsx
    └── components/
        └── ChannelManagement.tsx
```

## 更新日期

最后更新：2025-01-XX
